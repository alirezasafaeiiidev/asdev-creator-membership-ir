سند محصول (PRD) — PatreonLiteIran (Patreon-lite Iran)
نسخه: 2.2
تاریخ: 2026-02-08

## 1) خلاصه اجرایی
هدف: ساخت یک پلتفرم ایرانی برای عضویت پولی و حمایت مالی از تولیدکنندگان محتوا (Creator) با پرداخت ریالی، تجربه کاربری فارسی و تسویه حساب.
اصل کلیدی: به‌دلیل تحریم‌ها و فیلترینگ، runtime سیستم باید **Local-first** باشد و تا حد امکان بدون وابستگی خارجی اجرا شود.

## 2) کاربران و نقش‌ها
- Supporter (کاربر/حامی)
- Creator (تولیدکننده محتوا)
- Admin (ادمین پلتفرم)
- Finance Admin (ادمین مالی/تسویه)
- Support Admin / Moderator (پشتیبانی/نظارت محتوا)

## 3) ارزش پیشنهادی (Value Proposition)
- پرداخت ریالی + عضویت ماهانه
- قفل محتوا و فایل (Protected Content) با کنترل دقیق دسترسی
- پنل ادمین برای نظارت، تحلیل، و رسیدگی به مشکلات (خصوصاً پرداخت/دانلود/تسویه)
- تجربه UI/UX و SEO حرفه‌ای برای صفحات عمومی کریتورها

## 4) دامنه MVP (بدون افزایش Scope)
MVP شامل:
- ثبت‌نام/ورود (JWT)
- پروفایل Creator و صفحه عمومی SEO
- Tierها (پلن عضویت)
- پرداخت ریالی (Gateway قابل تعویض + Mock برای توسعه)
- عضویت و تمدید
- پست و فایل (Asset) با signed URL
- پنل ادمین حداقلی: جستجو/فیلتر پرداخت‌ها + drill-down رویدادها
- مانیتورینگ/تحلیل حداقلی از روی DB/audit_logs

خارج از MVP:
- ویدئو استریمینگ سنگین
- توصیه‌گر محتوا، شبکه اجتماعی، پیام‌رسانی پیچیده
- سیستم ضدتقلب پیشرفته (فقط لاگ/ممیزی پایه)

## 5) نیازمندی‌های Non-Functional
- امنیت: RBAC + Audit-by-default + correlation_id
- قابلیت اطمینان: idempotency در callback پرداخت
- Local-first runtime: بدون CDN/سرویس خارجی در اجرا
- مشاهده‌پذیری: داشبورد ادمین + health endpoints
- کیفیت: تست واحد/یکپارچه/اسموک برای مسیرهای حساس

## 6) فازبندی تحویل (P0..P3 + RELEASE)
- P0: اسکلت پروژه + ابزارها + docs + compose + CI + dashboards
- P1: پرداخت + عضویت + admin troubleshooting حداقلی
- P2: حفاظت محتوا + سرچ/فیلتر + SEO baseline
- P3: پنل ادمین کامل + تسویه + داشبورد تحلیل
- RELEASE: runbook-driven release + snapshot/tag

منبع حقیقت فازها: `tools/phase-runner/phases.json`

## 7) معیارهای موفقیت
- Payment success rate قابل پایش و تحلیل توسط ادمین
- عدم دوباره‌شماری پرداخت‌ها در تسویه (UNIQUE payment_id)
- عدم دانلود بدون دسترسی و بدون signed URL
- صفحات عمومی Creator ایندکس‌پذیر با SEO پایه (title/desc/canonical/og + sitemap)

پایان سند.
